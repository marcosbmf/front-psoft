(function(t){function e(e){for(var a,s,i=e[0],l=e[1],c=e[2],d=0,m=[];d<i.length;d++)s=i[d],r[s]&&m.push(r[s][0]),r[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],a=!0,i=1;i<o.length;i++){var l=o[i];0!==r[l]&&(a=!1)}a&&(n.splice(e--,1),t=s(s.s=o[0]))}return t}var a={},r={app:0},n=[];function s(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=a,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(o,a,function(e){return t[e]}.bind(null,a));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var a=o("c21b"),r=o.n(a);r.a},"0652":function(t,e,o){},"08ab":function(t,e,o){"use strict";var a=o("0e41"),r=o.n(a);r.a},"08f2":function(t,e,o){},"0cd3":function(t,e,o){"use strict";var a=o("cd56"),r=o.n(a);r.a},"0e41":function(t,e,o){},2175:function(t,e,o){"use strict";var a=o("f587"),r=o.n(a);r.a},"2dd2":function(t,e,o){"use strict";var a=o("9961"),r=o.n(a);r.a},"2dd6":function(t,e,o){"use strict";var a=o("bd70"),r=o.n(a);r.a},"34cb":function(t,e,o){"use strict";var a=o("58fe"),r=o.n(a);r.a},3599:function(t,e,o){},"366f":function(t,e,o){},"3e69":function(t,e,o){},"4b57":function(t,e,o){"use strict";var a=o("82f9"),r=o.n(a);r.a},"52d3":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("097d");var a=o("2b0e"),r=(o("7f10"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:{"hide-menu":!t.isMenuVisible||!t.user},attrs:{id:"app"}},[o("Header",{attrs:{title:"CCC PHARMA",hideToggle:!t.user,hideUserDropdown:!t.user}}),o("Content"),o("Footer")],1)}),n=[],s=(o("96cf"),o("1da1")),i=o("2f62"),l=o("bc3a"),c="acessToken",u="https://farmacia-cg.herokuapp.com/";function d(t){t&&t.response&&t.response.data?a["a"].toasted.global.defaultError({msg:t.response.data}):"string"===typeof t?a["a"].toasted.global.defaultError({msg:t}):a["a"].toasted.global.defaultError()}var m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("header",{staticClass:"header"},[o("div",[o("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal1",modifiers:{modal1:!0}}],attrs:{id:"modal1"}},[t._v("Ítens disponíveis")]),o("b-modal",{attrs:{id:"modal1"}},[o("h1",{staticClass:"title1"},[t._v("Ítens disponíveis para compra")]),o("b-table",{attrs:{hover:"",striped:"",items:t.produtos,fields:t.fields}}),o("h1",{staticClass:"title1"},[t._v("Ítens faltantes")]),o("b-table",{attrs:{hover:"",striped:"",items:t.faltantes,fields:t.fields}})],1)],1),o("h1",{staticClass:"title"},[o("router-link",{attrs:{to:"/"}},[t._v(t._s(t.title))])],1),t.hideUserDropdown?t._e():o("UserDropdown")],1)},p=[],f=(o("ac6a"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"user-dropdown"},[o("div",{staticClass:"user-button"},[o("span",{staticClass:"d-none d-sm-block"},[t._v(t._s(t.user.name))]),o("div",{staticClass:"user-dropdown-img"},[o("Gravatar",{attrs:{email:t.user.email,alt:"User"}})],1),o("i",{staticClass:"fa fa-angle-down"})]),o("div",{staticClass:"user-dropdown-content"},[t.user.admin?o("router-link",{attrs:{to:"/admin"}},[o("i",{staticClass:"fa fa-cogs"}),t._v(" Administração")]):t._e(),o("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[o("i",{staticClass:"fa fa-sign-out"}),t._v(" Sair")])],1)])}),v=[],h=o("e06a"),b=o.n(h),g={name:"UserDropdown",components:{Gravatar:b.a},computed:Object(i["b"])(["user"]),methods:{logout:function(){localStorage.removeItem(c),this.$store.commit("setUser",null),this.$router.push({name:"auth"})}}},_=g,y=(o("a09f"),o("2877")),k=Object(y["a"])(_,f,v,!1,null,null,null);k.options.__file="UserDropdown.vue";var x=k.exports,w={name:"Header",components:{UserDropdown:x},data:function(){return{produtos:[],faltantes:[],fields:[{key:"nome",label:"Nome",sortable:!0},{key:"preco",label:"Preço",sortable:!0}]}},props:{title:String,hideToggle:Boolean,hideUserDropdown:Boolean},computed:{icon:function(){return this.$store.state.isMenuVisible?"fa-angle-left":"fa-angle-down"}},methods:{toggleMenu:function(){this.$store.commit("toggleMenu")},showModal:function(){var t=this;this.produtos=[],l.get("https://farmacia-cg.herokuapp.com/public/produtos").then(function(e){e.data.forEach(function(e){e.quantidadeDisponivel>15?t.produtos.push(e.produto):t.faltantes.push(e.produto)})})}},mounted:function(){this.showModal()}},C=w,P=(o("9f34"),Object(y["a"])(C,m,p,!1,null,null,null));P.options.__file="Header.vue";var $=P.exports,S=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("aside",{directives:[{name:"show",rawName:"v-show",value:t.isMenuVisible,expression:"isMenuVisible"}],staticClass:"menu"})},E=[],q={name:"Menu",computed:Object(i["b"])(["isMenuVisible"])},A=q,I=(o("4b57"),Object(y["a"])(A,S,E,!1,null,null,null));I.options.__file="Menu.vue";var O=I.exports,T=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content"},[o("router-view")],1)},D=[],j={name:"Content"},V=j,L=(o("9551"),Object(y["a"])(V,T,D,!1,null,null,null));L.options.__file="Content.vue";var N=L.exports,M=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("footer",{staticClass:"footer"})},B=[],R={name:"Footer",data:function(){return{contador:0}}},U=R,F=(o("2175"),Object(y["a"])(U,M,B,!1,null,null,null));F.options.__file="Footer.vue";var z=F.exports,H=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},J=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loading"},[a("img",{attrs:{src:o("cf1c"),alt:"Loading"}})])}],Q={name:"Loading"},G=Q,K=(o("2dd6"),Object(y["a"])(G,H,J,!1,null,null,null));K.options.__file="Loading.vue";K.exports;var W={name:"App",components:{Header:$,Menu:O,Content:N,Footer:z},computed:Object(i["b"])(["isMenuVisible","user"]),data:function(){return{validatingToken:!0}},methods:{validateToken:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,o,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.validatingToken=!0,e=localStorage.getItem(c),o=JSON.parse(e),this.$store.commit("setUser",null),o){t.next=8;break}return this.validatingToken=!1,this.$router.push({name:"auth"}),t.abrupt("return");case 8:return t.next=10,l({url:"".concat(u,"protected/conta"),method:"get",headers:{Authorization:o}});case 10:a=t.sent,a.data?(a.data.acessToken=o,this.$store.commit("setUser",a.data)):(localStorage.removeItem(c),this.$router.push({name:"auth"})),this.validatingToken=!1;case 13:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.validateToken()}},X=W,Y=(o("034f"),Object(y["a"])(X,r,n,!1,null,null,null));Y.options.__file="App.vue";var Z=Y.exports;a["a"].use(i["a"]);var tt=new i["a"].Store({state:{isMenuVisible:!1,user:{name:null,acessToken:null}},mutations:{toggleMenu:function(t,e){t.user?t.isMenuVisible=void 0===e?!t.isMenuVisible:e:t.isMenuVisible=!1},setUser:function(t,e){t.user=e,e?(l.defaults.headers.common["Authorization"]="".concat(e.token),t.isMenuVisible=!0):(delete l.defaults.headers.common["Authorization"],t.isMenuVisible=!1)},updateAccessToken:function(t,e){t.user.acessToken=e}},actions:{fetchAccessToken:function(t){var e=t.commit;e("updateAccessToken",localStorage.getItem("accessToken"))}}}),et=(o("f9e3"),o("2dd8"),o("9f7b"));a["a"].use(et["a"]);var ot=o("a65d"),at=o.n(ot);a["a"].use(at.a,{iconPack:"fontawesome",duration:3e3}),a["a"].toasted.register("defaultSuccess",function(t){return t.msg?t.msg:"Operação realidada com sucesso!"},{type:"success",icon:"check"}),a["a"].toasted.register("defaultError",function(t){return t.msg?t.msg:"Oops.. Erro inesperado."},{type:"error",icon:"times"});var rt=o("8c4f"),nt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("Search")],1)},st=[],it=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"search"}},[o("label",{staticClass:"tabela"},[o("label",{staticClass:"control-label"},[t._v("Search")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"form-control",attrs:{placeholder:"Digite seu medicamento aqui..."},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})]),o("table",{staticClass:"tabela fundo table table-striped table-bordered table-condensed table-hover",staticStyle:{width:"100%"},attrs:{border:"1px",cellpadding:"5px",cellspacing:"0"}},[t._m(0),o("tbody",t._l(t.queryResults,function(e){return o("tr",{key:e.nome,staticClass:"cursor",on:{click:function(o){t.addTableRow(e)}}},[o("td",[t._v(t._s(e.produto.nome))]),o("td",[t._v(t._s(e.quantidadeDisponivel))]),o("td",[t._v(t._s(e.produto.preco))]),o("td",[t._v(t._s(e.produto.tipo))])])}))]),o("div",{attrs:{id:"compra"}},[t._m(1),t.aparece?o("button",{on:{click:t.venda}},[t._v("Comprar")]):t._e()])])},lt=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("th",[t._v("Nome")]),o("th",[t._v("Quantidade")]),o("th",[t._v("Preço")]),o("th",[t._v("Tipo")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("table",{attrs:{id:"lista"}},[o("thead",[o("th",[t._v("Sua lista aqui...")])]),o("tbody",{attrs:{id:"lista"}},[o("tr")])])}],ct=o("2909"),ut=(o("55dd"),o("ad02")),dt=o.n(ut),mt=o("5dee"),pt=o("bc3a"),ft={name:"Search",data:function(){return{query:"",options:mt,aparece:!1,produtos:[],produtosCompra:[],quantity:0}},methods:{addTableRow:function(t){if(t.quantidadeDisponivel>0){var e=document.getElementById("lista"),o=e.insertRow(-1),a=o.insertCell(0),r=document.createTextNode(t.produto.nome);a.appendChild(r),this.aparece=!0;var n=prompt("Digite a quantidade que quer comprar: ");this.produtosCompra.push({produto:t.produto,quantidade:n})}else this.$toasted.global.defaultSuccess({msg:"Elemento em falta... /:"})},compra:function(){this.produtosCompra.forEach(function(t){return t.quantidadeDisponivel-=1}),this.produtosCompra=[]},loadItens:function(){var t=this;this.produtos=[],this.produtosCompra=[],pt.get("https://farmacia-cg.herokuapp.com/public/produtos").then(function(e){e.data.forEach(function(e){t.produtos.push(e)})})},venda:function(){var t=this;pt({method:"post",url:"https://farmacia-cg.herokuapp.com/protected/pedido",data:this.produtosCompra}).then(function(){alert("Cadastro da venda realizado com sucesso"),t.loadItens()}).catch(function(){alert("Falha no cadastro da venda"),t.loadItens()})}},computed:{queryResults:function(){var t=this;if(!this.query)return this.produtos;var e=dt.a.prepareQuery(this.query),o={};return this.produtos.map(function(a,r){var n=[a.produto.nome,a.quantidadeDisponivel,a.produto.preco,"".concat(a.produto.tipo)].map(function(o){return dt.a.score(o,t.query,{preparedQuery:e})});return o[a.produto.nome]=Math.max.apply(Math,Object(ct["a"])(n)),a}).filter(function(t){return o[t.produto.nome]>1}).sort(function(t,e){return o[e.produto.nome]-o[t.produto.nome]})}},mounted:function(){},created:function(){this.loadItens()}},vt=ft,ht=(o("2dd2"),Object(y["a"])(vt,it,lt,!1,null,null,null));ht.options.__file="Search.vue";var bt=ht.exports,gt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page-title"},[o("h1",[t.icon?o("i",{class:t.icon}):t._e(),t._v(" "+t._s(t.main))]),o("h2",[t._v(t._s(t.sub))]),o("hr")])},_t=[],yt={name:"PageTitle",props:["icon","main","sub"]},kt=yt,xt=(o("a405"),Object(y["a"])(kt,gt,_t,!1,null,null,null));xt.options.__file="PageTitle.vue";var wt=xt.exports,Ct=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"stat"},[o("div",{staticClass:"stat-icon"},[o("i",{class:t.icon,style:t.style})]),o("div",{staticClass:"stat-info"},[o("span",{staticClass:"stat-title"},[t._v(t._s(t.title))]),o("span",{staticClass:"stat-value"},[t._v(t._s(t.value))])])])},Pt=[],$t={name:"Stat",props:["title","value","icon","color"],computed:{style:function(){return"color: "+(this.color||"#000")}}},St=$t,Et=(o("5b5c"),Object(y["a"])(St,Ct,Pt,!1,null,null,null));Et.options.__file="Stat.vue";var qt=Et.exports,At=(o("bc3a"),{name:"Home",components:{PageTitle:wt,Stat:qt,Search:bt}}),It=At,Ot=(o("b497"),Object(y["a"])(It,nt,st,!1,null,null,null));Ot.options.__file="Home.vue";var Tt=Ot.exports,Dt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"admin-pages"},[o("PageTitle",{attrs:{icon:"fa fa-cogs",main:"Administração do Sistema",sub:"Cadastros & Cia"}}),o("div",{staticClass:"admin-pages-tabs"},[o("b-card",{attrs:{"no-body":""}},[o("b-tabs",{attrs:{card:""}},[o("b-tab",{attrs:{title:"Avisos",active:""}},[o("Avisos")],1),o("b-tab",{attrs:{title:"Itens"}},[o("ItensAdmin")],1),o("b-tab",{attrs:{title:"Lotes"}},[o("LotesAdmin")],1),o("b-tab",{attrs:{title:"Vendas"}},[o("VendasAdmin")],1),o("b-tab",{attrs:{title:"Promoçoes"}},[o("promocoesAdmin")],1)],1)],1)],1)],1)},jt=[],Vt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"itens-admin"},[o("b-form",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.produto.nome,expression:"produto.nome"}],attrs:{id:"produto-nome",type:"hidden"},domProps:{value:t.produto.nome},on:{input:function(e){e.target.composing||t.$set(t.produto,"nome",e.target.value)}}}),o("b-row",[o("b-col",{attrs:{md:"6",sm:"12"}},[o("b-form-group",{attrs:{label:"Nome:","label-for":"produto-nome"}},[o("b-form-input",{attrs:{id:"produto-nome",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"Informe o Nome do Produto..."},model:{value:t.produto.nome,callback:function(e){t.$set(t.produto,"nome",e)},expression:"produto.nome"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Preço:","label-for":"produto-preço"}},[o("b-form-input",{attrs:{id:"produto-preco",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"Informe o Preço do Produto..."},model:{value:t.produto.preco,callback:function(e){t.$set(t.produto,"preco",e)},expression:"produto.preco"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Descrição:","label-for":"produto-descricao"}},[o("b-form-input",{attrs:{id:"produto-descricao",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"Informe a Descrição do Produto..."},model:{value:t.produto.descricao,callback:function(e){t.$set(t.produto,"descricao",e)},expression:"produto.descricao"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Codigo:","label-for":"produto-codigo"}},[o("b-form-input",{attrs:{id:"produto-codigo",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"Informe o codigo do Produto..."},model:{value:t.produto.codBarra,callback:function(e){t.$set(t.produto,"codBarra",e)},expression:"produto.codBarra"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"fabricante:","label-for":"produto-fabricante"}},[o("b-form-input",{attrs:{id:"produto-fabricante",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"Informe o Fabricante do Produto..."},model:{value:t.produto.fabricante,callback:function(e){t.$set(t.produto,"fabricante",e)},expression:"produto.fabricante"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Categoria:","label-for":"produto-categoria"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.produto.tipo,expression:"produto.tipo"}],attrs:{id:"tipos-produto",type:"Dropdown Button",required:"",readonly:"remove"===t.mode},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.produto,"tipo",e.target.multiple?o:o[0])}}},t._l(t.tiposProduto,function(e){return o("option",{key:e.text},[t._v(t._s(e.text))])}))])],1)],1),"save"===t.mode?o("b-button",{attrs:{variant:"primary"},on:{click:t.save}},[t._v("Salvar")]):t._e(),"remove"===t.mode?o("b-button",{attrs:{variant:"danger"},on:{click:t.remove}},[t._v("Excluir")]):t._e(),o("b-button",{staticClass:"ml-2",on:{click:t.reset}},[t._v("Cancelar")])],1),o("hr"),o("b-table",{attrs:{hover:"",striped:"",items:t.produtos,fields:t.fields},scopedSlots:t._u([{key:"actions",fn:function(e){return[o("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:function(o){t.loadProduto(e.item)}}},[o("i",{staticClass:"fa fa-pencil"})]),o("b-button",{attrs:{variant:"danger"},on:{click:function(o){t.loadProduto(e.item,"remove")}}},[o("i",{staticClass:"fa fa-trash"})])]}}])})],1)},Lt=[],Nt=o("be94");function Mt(t,e){for(var o=0;o<e.length;o++)if(e[o].codBarra==t.codBarra)return!1;return!0}var Bt={nome:"ItensAdmin",data:function(){return{mode:"save",produto:{},produtos:[],vencidos:[],faltantes:[],tiposProduto:[{text:"medicamento",id:1},{text:"alimento",id:2},{text:"higiene pessoal",id:3},{text:"cosmético",id:4}],fields:[{key:"nome",label:"Nome",sortable:!0},{key:"tipo",label:"Categoria",sortable:!0},{key:"preco",label:"Preço",sortable:!0},{key:"descricao",label:"Descrição",sortable:!0},{key:"actions",label:"Ações"}]}},created:function(){},methods:{loadItens:function(){var t=this;this.produtos=[],l.get("https://farmacia-cg.herokuapp.com/public/produtos").then(function(e){e.data.forEach(function(e){t.produtos.push(e.produto)})})},reset:function(){this.mode="save",this.produto={},this.produtos=[],setTimeout(this.loadItens(),1e3)},save:function(){var t=this;Mt(this.produto,this.produtos)?l({method:"post",url:"https://farmacia-cg.herokuapp.com/admin/produtos",data:this.produto}).then(function(){t.$toasted.global.defaultSuccess({msg:"Cadastro realizado com sucesso"}),t.reset()}):l({method:"put",url:"https://farmacia-cg.herokuapp.com/admin/produtos/"+this.produto.codBarra,data:this.produto}).then(function(){t.$toasted.global.defaultSuccess({msg:"Alteração realizada!"}),t.reset()})},remove:function(){var t=this;l({method:"DELETE",url:"https://farmacia-cg.herokuapp.com/admin/produtos/"+this.produto.codBarra}).then(function(){t.$toasted.global.defaultSuccess({msg:"Remoção realizada!"}),t.reset()})},loadProduto:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"save";this.mode=e,this.produto=Object(Nt["a"])({},t)},avisaFalta:function(){var t=this;this.produtos.forEach(function(e){e.falta||t.faltantes.push(e.nome),e.vencidos.forEach(function(e){t.vencidos.push(e)})})}},mounted:function(){this.loadItens()}},Rt=Bt,Ut=(o("0cd3"),Object(y["a"])(Rt,Vt,Lt,!1,null,null,null));Ut.options.__file="ItensAdmin.vue";var Ft=Ut.exports,zt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"lotes-admin"},[o("b-form",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.lote.numeroLote,expression:"lote.numeroLote"}],attrs:{id:"lote-nome",type:"hidden"},domProps:{value:t.lote.numeroLote},on:{input:function(e){e.target.composing||t.$set(t.lote,"numeroLote",e.target.value)}}}),o("b-row",[o("b-col",{attrs:{md:"6",sm:"12"}},[o("b-form-group",{attrs:{label:"Número:","label-for":"lote-numero"}},[o("b-form-input",{attrs:{id:"lote-numero",type:"text",required:"",readonly:!0,placeholder:"Informe o numero do lote..."},model:{value:t.lote.numeroLote,callback:function(e){t.$set(t.lote,"numeroLote",e)},expression:"lote.numeroLote"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Validade:","label-for":"lote-validade"}},[o("b-form-input",{attrs:{id:"lote-validade",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"2001-09-08"},model:{value:t.lote.dataValidade,callback:function(e){t.$set(t.lote,"dataValidade",e)},expression:"lote.dataValidade"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Quantidade Inicial:","label-for":"lote-qinicial"}},[o("b-form-input",{attrs:{id:"lote-qinicial",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"Informe a quantidade inicial do lote..."},model:{value:t.lote.quantidadeInicial,callback:function(e){t.$set(t.lote,"quantidadeInicial",e)},expression:"lote.quantidadeInicial"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Código do produto:","label-for":"lote-codBarra"}},[o("b-form-input",{attrs:{id:"lote-codBarra",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"Informe o Código do produto..."},model:{value:t.lote.produto.codBarra,callback:function(e){t.$set(t.lote.produto,"codBarra",e)},expression:"lote.produto.codBarra"}})],1)],1)],1),"save"===t.mode?o("b-button",{attrs:{variant:"primary"},on:{click:t.save}},[t._v("Salvar")]):t._e(),"remove"===t.mode?o("b-button",{attrs:{variant:"danger"},on:{click:t.remove}},[t._v("Excluir")]):t._e(),o("b-button",{staticClass:"ml-2",on:{click:t.reset}},[t._v("Cancelar")])],1),o("hr"),o("b-table",{attrs:{hover:"",striped:"",items:t.lotes,fields:t.fields},scopedSlots:t._u([{key:"actions",fn:function(e){return[o("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:function(o){t.loadLote(e.item)}}},[o("i",{staticClass:"fa fa-pencil"})]),o("b-button",{attrs:{variant:"danger"},on:{click:function(o){t.loadLote(e.item,"remove")}}},[o("i",{staticClass:"fa fa-trash"})])]}}])})],1)},Ht=[],Jt={nome:"LotesAdmin",data:function(){return{mode:"save",lote:{produto:{}},lotes:[],fields:[{key:"numeroLote",label:"Número",sortable:!0},{key:"dataValidade",label:"Validade",sortable:!0},{key:"quantidadeInicial",label:"Quantidade Inicial",sortable:!0},{key:"quantidadeVendida",label:"Quantidade Vendida",sortable:!0},{key:"produto.codBarra",label:"Produto referido",sortable:!0},{key:"actions",label:"Ações"}]}},methods:{loadLotes:function(){var t=this;this.lotes=[],l.get("https://farmacia-cg.herokuapp.com/admin/produtos/-1/lotes").then(function(e){e.data.forEach(function(e){t.lotes.push(e)})})},reset:function(){this.mode="save",this.lote={produto:{}},this.loadLotes()},save:function(){var t=this;l.get("https://farmacia-cg.herokuapp.com/public/produtos/"+this.lote.produto.codBarra).then(function(e){t.lote.produto=e.data.produto}).then(function(){l({method:"post",url:"https://farmacia-cg.herokuapp.com/admin/produtos/".concat(t.lote.produto.codBarra,"/lotes"),data:t.lote}).then(function(){t.$toasted.global.defaultSuccess({msg:"Cadastro de lote realizado com sucesso"}),t.reset()})})},remove:function(){var t=this;l({method:"DELETE",url:"https://farmacia-cg.herokuapp.com/admin/produtos/".concat(this.lote.produto.codBarra,"/lotes/").concat(this.lote.numeroLote)}).then(function(){t.$toasted.global.defaultSuccess({msg:"Remoção Realizada"}),t.reset()})},loadLote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"save";this.mode=e,this.lote=Object(Nt["a"])({},t)}},mounted:function(){this.loadLotes()}},Qt=Jt,Gt=(o("e3e6"),Object(y["a"])(Qt,zt,Ht,!1,null,null,null));Gt.options.__file="LotesAdmin.vue";var Kt=Gt.exports,Wt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"vendas-admin"},[o("b-form",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.venda.nome,expression:"venda.nome"}],attrs:{id:"venda-nome",type:"hidden"},domProps:{value:t.venda.nome},on:{input:function(e){e.target.composing||t.$set(t.venda,"nome",e.target.value)}}}),o("b-row",[o("b-col",{attrs:{md:"6",sm:"12"}},[o("b-form-group",{attrs:{label:"Id:","label-for":"venda-id"}},[o("b-form-input",{attrs:{id:"venda-id",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"Informe o Id do venda..."},model:{value:t.venda.nome,callback:function(e){t.$set(t.venda,"nome",e)},expression:"venda.nome"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Produtos:","label-for":"venda-produtos"}},[o("b-form-input",{attrs:{id:"venda-produtos",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"Informe os Produtos da venda..."},model:{value:t.venda.categoria,callback:function(e){t.$set(t.venda,"categoria",e)},expression:"venda.categoria"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Valor Total:","label-for":"venda-valorTotal"}},[o("b-form-input",{attrs:{id:"venda-valorTotal",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"Valor total sera calculado..."},model:{value:t.venda.preco,callback:function(e){t.$set(t.venda,"preco",e)},expression:"venda.preco"}})],1)],1)],1),"save"===t.mode?o("b-button",{attrs:{variant:"primary"},on:{click:t.save}},[t._v("Salvar")]):t._e(),"remove"===t.mode?o("b-button",{attrs:{variant:"danger"},on:{click:t.remove}},[t._v("Excluir")]):t._e(),o("b-button",{staticClass:"ml-2",on:{click:t.reset}},[t._v("Cancelar")])],1),o("hr"),o("b-table",{attrs:{hover:"",striped:"",items:t.vendas,fields:t.fields},scopedSlots:t._u([{key:"actions",fn:function(e){return[o("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:function(o){t.loadVenda(e.item)}}},[o("i",{staticClass:"fa fa-pencil"})]),o("b-button",{attrs:{variant:"danger"},on:{click:function(o){t.loadVenda(e.item,"remove")}}},[o("i",{staticClass:"fa fa-trash"})])]}}])})],1)},Xt=[],Yt=(o("c5f6"),{nome:"VendasAdmin",data:function(){return{mode:"save",venda:{},vendas:[],fields:[{key:"id",label:"Id",sortable:!0},{key:"produtos",label:"Produtos",sortable:!0},{key:"valorTotal",label:"valorTotal",sortable:!0},{key:"actions",label:"Ações"}]}},methods:{loadVendas:function(){return this.vendas},reset:function(){this.mode="save",this.venda={},this.loadVendas()},save:function(){var t=this,e=!1;Array.prototype.insert=function(t,e){this.splice(t,0,e)};var o=Number;this.vendas.forEach(function(a){a.id==t.venda.id&&(e=!0,o=t.vendas.indexOf(a),t.vendas.splice(o,1))}),e?this.vendas.insert(o,this.venda):this.vendas.push(this.venda),this.reset()},remove:function(){var t=this;this.vendas.forEach(function(e){e.codigo==t.venda.codigo&&t.vendas.splice(t.vendas.indexOf(e),1)}),this.reset()},loadVenda:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"save";this.mode=e,this.venda=Object(Nt["a"])({},t)}},mounted:function(){this.loadVendas()}}),Zt=Yt,te=(o("34cb"),Object(y["a"])(Zt,Wt,Xt,!1,null,null,null));te.options.__file="VendasAdmin.vue";var ee=te.exports,oe=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"promocoes-admin"},[o("b-form",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.promocao.categoria,expression:"promocao.categoria"}],attrs:{id:"promocao-nome",type:"hidden"},domProps:{value:t.promocao.categoria},on:{input:function(e){e.target.composing||t.$set(t.promocao,"categoria",e.target.value)}}}),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Data início:","label-for":"promocao-di"}},[o("b-form-input",{attrs:{id:"promocao-di",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"Informe a data inicial da promocao..."},model:{value:t.promocao.dataInicio,callback:function(e){t.$set(t.promocao,"dataInicio",e)},expression:"promocao.dataInicio"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Data Final:","label-for":"promocao-df"}},[o("b-form-input",{attrs:{id:"promocao-df",type:"text",required:"",readonly:"remove"===t.mode,placeholder:"Informe a data final da promocao..."},model:{value:t.promocao.dataTermino,callback:function(e){t.$set(t.promocao,"dataTermino",e)},expression:"promocao.dataTermino"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Tipo de desconto","label-for":"promocao-tipos"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.promocao.tipoDesconto,expression:"promocao.tipoDesconto"}],attrs:{id:"promocao-tipos",type:"Dropdown Button",required:"",readonly:"remove"===t.mode},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.promocao,"tipoDesconto",e.target.multiple?o:o[0])}}},t._l(t.tiposDesconto,function(e){return o("option",{key:e.text},[t._v(t._s(e.text))])}))])],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Categoria:","label-for":"produto-categoria"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.promocao.tipoProduto,expression:"promocao.tipoProduto"}],attrs:{id:"tipos-produto",type:"Dropdown Button",required:"",readonly:"remove"===t.mode},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.promocao,"tipoProduto",e.target.multiple?o:o[0])}}},t._l(t.tiposProduto,function(e){return o("option",{key:e.text},[t._v(t._s(e.text))])}))])],1)],1),"save"===t.mode?o("b-button",{attrs:{variant:"primary"},on:{click:t.save}},[t._v("Salvar")]):t._e(),"remove"===t.mode?o("b-button",{attrs:{variant:"danger"},on:{click:t.remove}},[t._v("Excluir")]):t._e(),o("b-button",{staticClass:"ml-2",on:{click:t.reset}},[t._v("Cancelar")])],1),o("hr"),o("b-table",{attrs:{hover:"",striped:"",items:t.promocoes,fields:t.fields},scopedSlots:t._u([{key:"actions",fn:function(e){return[o("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:function(o){t.loadPromocao(e.item)}}},[o("i",{staticClass:"fa fa-pencil"})]),o("b-button",{attrs:{variant:"danger"},on:{click:function(o){t.loadPromocao(e.item,"remove")}}},[o("i",{staticClass:"fa fa-trash"})])]}}])})],1)},ae=[],re=o("bc3a"),ne={nome:"PromocoesAdmin",data:function(){return{mode:"save",tipo:"Sem desconto",tiposDesconto:[{text:"Bom desconto",id:1},{text:"Ótimo desconto",id:2},{text:"Super desconto",id:3}],tiposProduto:[{text:"medicamento",id:1},{text:"alimento",id:2},{text:"higiene pessoal",id:3},{text:"cosmético",id:4}],promocao:{},promocoes:[],fields:[{key:"tipoDesconto",label:"Categoria",sortable:!0},{key:"dataInicio",label:"Data Inicial",sortable:!0},{key:"dataTermino",label:"Data Final",sortable:!0},{key:"tipoProduto",label:"Tipo de desconto",sortable:!0},{key:"ocorrendo",label:"Ativa",sortable:!0},{key:"actions",label:"Ações"}]}},methods:{loadPromocoes:function(){var t=this;this.promocoes=[],re.get("https://farmacia-cg.herokuapp.com/admin/promocoes").then(function(e){e.data.forEach(function(e){t.promocoes.push(e)})})},reset:function(){this.mode="save",this.promocao={},this.loadPromocoes()},save:function(){var t=this;re({method:"post",url:"https://farmacia-cg.herokuapp.com/admin/promocoes",data:this.promocao}).then(function(){t.$toasted.global.defaultSuccess({msg:"Promoção cadastrada com sucesso!"}),t.reset()}).catch(function(){t.$toasted.global.defaultSuccess({msg:"Ocorreu algum erro no cadastro!"}),t.reset()})},remove:function(){this.$toasted.global.defaultSuccess({msg:"Impossível remover promoções por hora!"})},loadPromocao:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"save";this.mode=e,this.promocao=Object(Nt["a"])({},t)}},mounted:function(){this.loadPromocoes()}},se=ne,ie=(o("08ab"),Object(y["a"])(se,oe,ae,!1,null,null,null));ie.options.__file="PromocoesAdmin.vue";var le=ie.exports,ce=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"avisos"},[o("b-table",{attrs:{striped:"",hover:"",items:t.faltantes,fields:t.fields}}),o("b-table",{attrs:{striped:"",hover:"",items:t.vencidos,fields:t.fields2}})],1)},ue=[],de={nome:"Avisos",data:function(){return{produtos:[],vencidos:[],faltantes:[],fields:[{key:"nome",label:"Produtos Faltantes",sortable:!0}],fields2:[{key:"nome",label:"Produtos com lotes vencidos ou próximos do vencimento",sortable:!0}]}},methods:{loadItens:function(){var t=this;this.produtos=[],l.get("https://farmacia-cg.herokuapp.com/public/produtos").then(function(e){e.data.forEach(function(e){e.produto.quantidadeDisponivel=e.quantidadeDisponivel,t.produtos.push(e.produto)})}).then(function(){t.avisaFalta()})},avisaFalta:function(){var t=this;this.produtos.forEach(function(e){e.quantidadeDisponivel<=15&&t.faltantes.push(e),e.vencimentoProximo&&t.vencidos.push(e)})}},mounted:function(){this.loadItens()}},me=de,pe=(o("65de"),Object(y["a"])(me,ce,ue,!1,null,null,null));pe.options.__file="Avisos.vue";var fe=pe.exports,ve={name:"AdminPages",components:{PageTitle:wt,ItensAdmin:Ft,LotesAdmin:Kt,VendasAdmin:ee,PromocoesAdmin:le,Avisos:fe}},he=ve,be=(o("9519"),Object(y["a"])(he,Dt,jt,!1,null,null,null));be.options.__file="AdminPages.vue";var ge=be.exports,_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth-content"},[a("div",{staticClass:"auth-modal"},[a("img",{attrs:{src:o("a33c"),width:"200",alt:"Logo"}}),a("div",{staticClass:"auth-title"},[t._v(t._s(t.showSignup?"Cadastro":"Login"))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],attrs:{type:"text",placeholder:"Nome"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),t.showSignup?a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{name:"email",type:"text",placeholder:"E-mail"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}):t._e(),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{name:"password",type:"password",placeholder:"Senha"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t.showSignup?a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.confirmPassword,expression:"user.confirmPassword"}],attrs:{type:"password",placeholder:"Confirme a Senha"},domProps:{value:t.user.confirmPassword},on:{input:function(e){e.target.composing||t.$set(t.user,"confirmPassword",e.target.value)}}}):t._e(),t.showSignup?a("button",{staticClass:"reg",on:{click:t.signup}},[t._v("Registrar")]):a("button",{staticClass:"reg",on:{click:t.signin}},[t._v("Entrar")]),a("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.showSignup=!t.showSignup}}},[t.showSignup?a("span",[t._v("Já tem cadastro? Acesse o Login!")]):a("span",[t._v("Não tem cadastro? Registre-se aqui!")])])])])},ye=[],ke=(o("7f7f"),{name:"Auth",data:function(){return{showSignup:!1,user:{}}},methods:{signin:function(){var t=this;console.log(this.user),this.user.token="Basic "+btoa(this.user.name+":"+this.user.password),l({url:"".concat(u,"protected/conta"),method:"get",headers:{Authorization:this.user.token}}).then(function(e){l.defaults.headers.common["Authorization"]=t.user.token,e.data.token=t.user.token,console.log(e.data),t.$store.commit("setUser",e.data),localStorage.setItem(c,JSON.stringify(t.user.token)),e.data.admin?t.$router.push({path:"/admin"}):t.$router.push({path:"/"})}).catch(function(){t.user.token=""})},signup:function(){var t=this;if(console.log(this.user),this.user.confirmPassword===this.user.password){var e={username:null,password:null,admin:!1};e.username=this.user.name,e.password=this.user.password,console.log(e),l.post("".concat(u,"public/conta"),e).then(function(){t.$toasted.global.defaultSuccess(),t.user={},t.showSignup=!1}).catch(d)}else this.$toasted.global.defaultError({msg:"Senhas não conferem!"})}}}),xe=ke,we=(o("ee68"),Object(y["a"])(xe,_e,ye,!1,null,null,null));we.options.__file="Auth.vue";var Ce=we.exports;a["a"].use(rt["a"]);var Pe=[{name:"home",path:"/",component:Tt},{name:"auth",path:"/auth",component:Ce},{name:"adminPages",path:"/admin",component:ge}],$e=new rt["a"]({mode:"history",routes:Pe});$e.beforeEach(function(t,e,o){var a=localStorage.getItem(c);if(t.matched.some(function(t){return t.meta.requiresAdmin})){var r=JSON.parse(a);r&&r.admin?o():o({path:"/"})}else o()});var Se=$e;a["a"].config.productionTip=!1,new a["a"]({store:tt,router:Se,render:function(t){return t(Z)}}).$mount("#app")},"58fe":function(t,e,o){},"5b5c":function(t,e,o){"use strict";var a=o("3e69"),r=o.n(a);r.a},"5dee":function(t){t.exports=[{nome:"pasta",situacao:"tem",preco:"5,30",tipo:"higiene"},{nome:"dorflex",situacao:"tem",preco:"66,30",tipo:"medicamento"},{nome:"cheetos",situacao:"tem",preco:"0,30",tipo:"comida"}]},"65de":function(t,e,o){"use strict";var a=o("c0cc"),r=o.n(a);r.a},"6eda":function(t,e,o){},"82f9":function(t,e,o){},9519:function(t,e,o){"use strict";var a=o("366f"),r=o.n(a);r.a},9551:function(t,e,o){"use strict";var a=o("6eda"),r=o.n(a);r.a},9961:function(t,e,o){},"9f20":function(t,e,o){},"9f34":function(t,e,o){"use strict";var a=o("08f2"),r=o.n(a);r.a},a09f:function(t,e,o){"use strict";var a=o("52d3"),r=o.n(a);r.a},a33c:function(t,e,o){t.exports=o.p+"img/joy.4b51beb8.png"},a405:function(t,e,o){"use strict";var a=o("dda0"),r=o.n(a);r.a},b497:function(t,e,o){"use strict";var a=o("3599"),r=o.n(a);r.a},bd70:function(t,e,o){},c0cc:function(t,e,o){},c21b:function(t,e,o){},cd56:function(t,e,o){},cf1c:function(t,e,o){t.exports=o.p+"img/loading.8a7630ca.gif"},dda0:function(t,e,o){},e3e6:function(t,e,o){"use strict";var a=o("0652"),r=o.n(a);r.a},ee68:function(t,e,o){"use strict";var a=o("9f20"),r=o.n(a);r.a},f587:function(t,e,o){}});
//# sourceMappingURL=app.ed3df646.js.map