(function(e){function t(t){for(var a,s,i=t[0],l=t[1],c=t[2],d=0,m=[];d<i.length;d++)s=i[d],r[s]&&m.push(r[s][0]),r[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(m.length)m.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],a=!0,i=1;i<o.length;i++){var l=o[i];0!==r[l]&&(a=!1)}a&&(n.splice(t--,1),e=s(s.s=o[0]))}return e}var a={},r={app:0},n=[];function s(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=a,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(o,a,function(t){return e[t]}.bind(null,a));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;n.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";var a=o("c21b"),r=o.n(a);r.a},"0652":function(e,t,o){},"08ab":function(e,t,o){"use strict";var a=o("0e41"),r=o.n(a);r.a},"08f2":function(e,t,o){},"0cd3":function(e,t,o){"use strict";var a=o("cd56"),r=o.n(a);r.a},"0e41":function(e,t,o){},2175:function(e,t,o){"use strict";var a=o("f587"),r=o.n(a);r.a},"2dd2":function(e,t,o){"use strict";var a=o("9961"),r=o.n(a);r.a},"2dd6":function(e,t,o){"use strict";var a=o("bd70"),r=o.n(a);r.a},"34cb":function(e,t,o){"use strict";var a=o("58fe"),r=o.n(a);r.a},3599:function(e,t,o){},"366f":function(e,t,o){},"3e69":function(e,t,o){},"4b57":function(e,t,o){"use strict";var a=o("82f9"),r=o.n(a);r.a},"52d3":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("097d");var a=o("2b0e"),r=(o("7f10"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:{"hide-menu":!e.isMenuVisible||!e.user},attrs:{id:"app"}},[o("Header",{attrs:{title:"CCC PHARMA",hideToggle:!e.user,hideUserDropdown:!e.user}}),e.user?o("Menu"):e._e(),o("Content"),o("Footer")],1)}),n=[],s=(o("96cf"),o("1da1")),i=o("2f62"),l=o("bc3a"),c="acessToken",u="https://farmacia-cg.herokuapp.com/";function d(e){e&&e.response&&e.response.data?a["a"].toasted.global.defaultError({msg:e.response.data}):"string"===typeof e?a["a"].toasted.global.defaultError({msg:e}):a["a"].toasted.global.defaultError()}var m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("header",{staticClass:"header"},[e.hideToggle?e._e():o("a",{staticClass:"toggle",on:{click:e.toggleMenu}},[o("i",{staticClass:"fa fa-lg",class:e.icon})]),o("div",[o("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal1",modifiers:{modal1:!0}}],attrs:{id:"modal1"}},[e._v("Ítens disponíveis")]),o("b-modal",{attrs:{id:"modal1",title:"Ítens disponíveis para compra"}},[o("b-table",{attrs:{hover:"",striped:"",items:e.produtos,fields:e.fields}})],1)],1),o("h1",{staticClass:"title"},[o("router-link",{attrs:{to:"/"}},[e._v(e._s(e.title))])],1),e.hideUserDropdown?e._e():o("UserDropdown")],1)},p=[],f=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"user-dropdown"},[o("div",{staticClass:"user-button"},[o("span",{staticClass:"d-none d-sm-block"},[e._v(e._s(e.user.name))]),o("div",{staticClass:"user-dropdown-img"},[o("Gravatar",{attrs:{email:e.user.email,alt:"User"}})],1),o("i",{staticClass:"fa fa-angle-down"})]),o("div",{staticClass:"user-dropdown-content"},[e.user.admin?o("router-link",{attrs:{to:"/admin"}},[o("i",{staticClass:"fa fa-cogs"}),e._v(" Administração")]):e._e(),o("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.logout(t)}}},[o("i",{staticClass:"fa fa-sign-out"}),e._v(" Sair")])],1)])},v=[],h=o("e06a"),b=o.n(h),g={name:"UserDropdown",components:{Gravatar:b.a},computed:Object(i["b"])(["user"]),methods:{logout:function(){localStorage.removeItem(c),this.$store.commit("setUser",null),this.$router.push({name:"auth"})}}},_=g,y=(o("a09f"),o("2877")),k=Object(y["a"])(_,f,v,!1,null,null,null);k.options.__file="UserDropdown.vue";var x=k.exports,w={name:"Header",components:{UserDropdown:x},data:function(){return{mode:"save",produto:{},produtos:[{nome:"pasta",situacao:"tem",preco:"5,30"},{nome:"dorflex",situacao:"tem",preco:"66,30"},{nome:"cheetos",situacao:"tem",preco:"0,30"}],fields:[{key:"nome",label:"Nome",sortable:!0},{key:"situacao",label:"Situação",sortable:!0},{key:"preco",label:"Preço",sortable:!0},{key:"actions",label:"Ações"}]}},props:{title:String,hideToggle:Boolean,hideUserDropdown:Boolean},computed:{icon:function(){return this.$store.state.isMenuVisible?"fa-angle-left":"fa-angle-down"}},methods:{toggleMenu:function(){this.$store.commit("toggleMenu")},showModal:function(){}}},C=w,P=(o("9f34"),Object(y["a"])(C,m,p,!1,null,null,null));P.options.__file="Header.vue";var $=P.exports,A=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("aside",{directives:[{name:"show",rawName:"v-show",value:e.isMenuVisible,expression:"isMenuVisible"}],staticClass:"menu"})},E=[],S={name:"Menu",computed:Object(i["b"])(["isMenuVisible"])},q=S,I=(o("4b57"),Object(y["a"])(q,A,E,!1,null,null,null));I.options.__file="Menu.vue";var O=I.exports,T=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[o("router-view")],1)},D=[],j={name:"Content"},V=j,N=(o("9551"),Object(y["a"])(V,T,D,!1,null,null,null));N.options.__file="Content.vue";var L=N.exports,M=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("footer",{staticClass:"footer"})},B=[],U={name:"Footer",data:function(){return{contador:0}}},F=U,R=(o("2175"),Object(y["a"])(F,M,B,!1,null,null,null));R.options.__file="Footer.vue";var z=R.exports,H=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},J=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading"},[a("img",{attrs:{src:o("cf1c"),alt:"Loading"}})])}],Q={name:"Loading"},G=Q,K=(o("2dd6"),Object(y["a"])(G,H,J,!1,null,null,null));K.options.__file="Loading.vue";K.exports;var W={name:"App",components:{Header:$,Menu:O,Content:L,Footer:z},computed:Object(i["b"])(["isMenuVisible","user"]),data:function(){return{validatingToken:!0}},methods:{validateToken:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.validatingToken=!0,t=localStorage.getItem(c),o=JSON.parse(t),this.$store.commit("setUser",null),o){e.next=8;break}return this.validatingToken=!1,this.$router.push({name:"auth"}),e.abrupt("return");case 8:return e.next=10,l({url:"".concat(u,"protected/conta"),method:"get",headers:{Authorization:o}});case 10:a=e.sent,a.data?(a.data.acessToken=o,this.$store.commit("setUser",a.data)):(localStorage.removeItem(c),this.$router.push({name:"auth"})),this.validatingToken=!1;case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.validateToken()}},X=W,Y=(o("034f"),Object(y["a"])(X,r,n,!1,null,null,null));Y.options.__file="App.vue";var Z=Y.exports;a["a"].use(i["a"]);var ee=new i["a"].Store({state:{isMenuVisible:!1,user:{name:null,acessToken:null}},mutations:{toggleMenu:function(e,t){e.user?e.isMenuVisible=void 0===t?!e.isMenuVisible:t:e.isMenuVisible=!1},setUser:function(e,t){e.user=t,t?(l.defaults.headers.common["Authorization"]="".concat(t.token),e.isMenuVisible=!0):(delete l.defaults.headers.common["Authorization"],e.isMenuVisible=!1)},updateAccessToken:function(e,t){e.user.acessToken=t}},actions:{fetchAccessToken:function(e){var t=e.commit;t("updateAccessToken",localStorage.getItem("accessToken"))}}}),te=(o("f9e3"),o("2dd8"),o("9f7b"));a["a"].use(te["a"]);var oe=o("a65d"),ae=o.n(oe);a["a"].use(ae.a,{iconPack:"fontawesome",duration:3e3}),a["a"].toasted.register("defaultSuccess",function(e){return e.msg?e.msg:"Operação realidada com sucesso!"},{type:"success",icon:"check"}),a["a"].toasted.register("defaultError",function(e){return e.msg?e.msg:"Oops.. Erro inesperado."},{type:"error",icon:"times"});var re=o("8c4f"),ne=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"home"},[o("Search")],1)},se=[],ie=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"search"}},[o("label",{staticClass:"tabela"},[o("label",{staticClass:"control-label"},[e._v("Search")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"form-control",attrs:{placeholder:"Digite seu medicamento aqui..."},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}})]),o("table",{staticClass:"tabela fundo table table-striped table-bordered table-condensed table-hover",staticStyle:{width:"100%"},attrs:{border:"1px",cellpadding:"5px",cellspacing:"0"}},[e._m(0),o("tbody",e._l(e.queryResults,function(t){return o("tr",{key:t.nome,staticClass:"cursor",on:{click:function(o){e.addTableRow(t)}}},[o("td",[e._v(e._s(t.produto.nome))]),o("td",[e._v(e._s(t.quantidadeDisponivel))]),o("td",[e._v(e._s(t.produto.preco))]),o("td",[e._v(e._s(t.produto.tipo))])])}))]),o("div",{attrs:{id:"compra"}},[e._m(1),e.aparece?o("button",{on:{click:e.venda}},[e._v("Comprar")]):e._e()])])},le=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("thead",[o("th",[e._v("Nome")]),o("th",[e._v("Quantidade")]),o("th",[e._v("Preço")]),o("th",[e._v("Tipo")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("table",{attrs:{id:"lista"}},[o("thead",[o("th",[e._v("Sua lista aqui...")])]),o("tbody",{attrs:{id:"lista"}},[o("tr")])])}],ce=o("2909"),ue=(o("55dd"),o("ac6a"),o("ad02")),de=o.n(ue),me=o("5dee"),pe=o("bc3a"),fe={name:"Search",data:function(){return{query:"",options:me,aparece:!1,produtos:[],produtosCompra:[],quantity:0}},methods:{addTableRow:function(e){if(e.quantidadeDisponivel>0){var t=document.getElementById("lista"),o=t.insertRow(-1),a=o.insertCell(0),r=document.createTextNode(e.produto.nome);a.appendChild(r),this.aparece=!0;var n=prompt("Digite a quantidade que quer comprar: ");this.produtosCompra.push({produto:e.produto,quantidade:n})}else alert("Elemento em falta... /:")},compra:function(){this.produtosCompra.forEach(function(e){return e.quantidadeDisponivel-=1}),this.produtosCompra=[]},loadItens:function(){var e=this;this.produtos=[],this.produtosCompra=[],pe.get("https://farmacia-cg.herokuapp.com/public/produtos").then(function(t){t.data.forEach(function(t){e.produtos.push(t)})})},venda:function(){var e=this;pe({method:"post",url:"https://farmacia-cg.herokuapp.com/protected/pedido",data:this.produtosCompra}).then(function(){alert("Cadastro da venda realizado com sucesso"),e.loadItens()}).catch(function(){alert("Falha no cadastro da venda"),e.loadItens()})}},computed:{queryResults:function(){var e=this;if(!this.query)return this.produtos;var t=de.a.prepareQuery(this.query),o={};return this.produtos.map(function(a,r){var n=[a.produto.nome,a.quantidadeDisponivel,a.produto.preco,"".concat(a.produto.tipo)].map(function(o){return de.a.score(o,e.query,{preparedQuery:t})});return o[a.produto.nome]=Math.max.apply(Math,Object(ce["a"])(n)),a}).filter(function(e){return o[e.produto.nome]>1}).sort(function(e,t){return o[t.produto.nome]-o[e.produto.nome]})}},mounted:function(){},created:function(){this.loadItens()}},ve=fe,he=(o("2dd2"),Object(y["a"])(ve,ie,le,!1,null,null,null));he.options.__file="Search.vue";var be=he.exports,ge=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page-title"},[o("h1",[e.icon?o("i",{class:e.icon}):e._e(),e._v(" "+e._s(e.main))]),o("h2",[e._v(e._s(e.sub))]),o("hr")])},_e=[],ye={name:"PageTitle",props:["icon","main","sub"]},ke=ye,xe=(o("a405"),Object(y["a"])(ke,ge,_e,!1,null,null,null));xe.options.__file="PageTitle.vue";var we=xe.exports,Ce=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"stat"},[o("div",{staticClass:"stat-icon"},[o("i",{class:e.icon,style:e.style})]),o("div",{staticClass:"stat-info"},[o("span",{staticClass:"stat-title"},[e._v(e._s(e.title))]),o("span",{staticClass:"stat-value"},[e._v(e._s(e.value))])])])},Pe=[],$e={name:"Stat",props:["title","value","icon","color"],computed:{style:function(){return"color: "+(this.color||"#000")}}},Ae=$e,Ee=(o("5b5c"),Object(y["a"])(Ae,Ce,Pe,!1,null,null,null));Ee.options.__file="Stat.vue";var Se=Ee.exports,qe=(o("bc3a"),{name:"Home",components:{PageTitle:we,Stat:Se,Search:be}}),Ie=qe,Oe=(o("b497"),Object(y["a"])(Ie,ne,se,!1,null,null,null));Oe.options.__file="Home.vue";var Te=Oe.exports,De=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"admin-pages"},[o("PageTitle",{attrs:{icon:"fa fa-cogs",main:"Administração do Sistema",sub:"Cadastros & Cia"}}),o("div",{staticClass:"admin-pages-tabs"},[o("b-card",{attrs:{"no-body":""}},[o("b-tabs",{attrs:{card:""}},[o("b-tab",{attrs:{title:"Avisos",active:""}},[o("Avisos")],1),o("b-tab",{attrs:{title:"Itens"}},[o("ItensAdmin")],1),o("b-tab",{attrs:{title:"Lotes"}},[o("LotesAdmin")],1),o("b-tab",{attrs:{title:"Vendas"}},[o("VendasAdmin")],1),o("b-tab",{attrs:{title:"Promoçoes"}},[o("promocoesAdmin")],1)],1)],1)],1)],1)},je=[],Ve=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"itens-admin"},[o("b-form",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.produto.nome,expression:"produto.nome"}],attrs:{id:"produto-nome",type:"hidden"},domProps:{value:e.produto.nome},on:{input:function(t){t.target.composing||e.$set(e.produto,"nome",t.target.value)}}}),o("b-row",[o("b-col",{attrs:{md:"6",sm:"12"}},[o("b-form-group",{attrs:{label:"Nome:","label-for":"produto-nome"}},[o("b-form-input",{attrs:{id:"produto-nome",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe o Nome do Produto..."},model:{value:e.produto.nome,callback:function(t){e.$set(e.produto,"nome",t)},expression:"produto.nome"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Preço:","label-for":"produto-preço"}},[o("b-form-input",{attrs:{id:"produto-preco",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe o Preço do Produto..."},model:{value:e.produto.preco,callback:function(t){e.$set(e.produto,"preco",t)},expression:"produto.preco"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Descrição:","label-for":"produto-descricao"}},[o("b-form-input",{attrs:{id:"produto-descricao",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe a Descrição do Produto..."},model:{value:e.produto.descricao,callback:function(t){e.$set(e.produto,"descricao",t)},expression:"produto.descricao"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Codigo:","label-for":"produto-codigo"}},[o("b-form-input",{attrs:{id:"produto-codigo",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe o codigo do Produto..."},model:{value:e.produto.codBarra,callback:function(t){e.$set(e.produto,"codBarra",t)},expression:"produto.codBarra"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"fabricante:","label-for":"produto-fabricante"}},[o("b-form-input",{attrs:{id:"produto-fabricante",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe o Fabricante do Produto..."},model:{value:e.produto.fabricante,callback:function(t){e.$set(e.produto,"fabricante",t)},expression:"produto.fabricante"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Categoria:","label-for":"produto-categoria"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.produto.tipo,expression:"produto.tipo"}],attrs:{id:"tipos-produto",type:"Dropdown Button",required:"",readonly:"remove"===e.mode},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.produto,"tipo",t.target.multiple?o:o[0])}}},e._l(e.tiposProduto,function(t){return o("option",{key:t.text},[e._v(e._s(t.text))])}))])],1)],1),"save"===e.mode?o("b-button",{attrs:{variant:"primary"},on:{click:e.save}},[e._v("Salvar")]):e._e(),"remove"===e.mode?o("b-button",{attrs:{variant:"danger"},on:{click:e.remove}},[e._v("Excluir")]):e._e(),o("b-button",{staticClass:"ml-2",on:{click:e.reset}},[e._v("Cancelar")])],1),o("hr"),o("b-table",{attrs:{hover:"",striped:"",items:e.produtos,fields:e.fields},scopedSlots:e._u([{key:"actions",fn:function(t){return[o("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:function(o){e.loadProduto(t.item)}}},[o("i",{staticClass:"fa fa-pencil"})]),o("b-button",{attrs:{variant:"danger"},on:{click:function(o){e.loadProduto(t.item,"remove")}}},[o("i",{staticClass:"fa fa-trash"})])]}}])})],1)},Ne=[],Le=o("be94");function Me(e,t){for(var o=0;o<t.length;o++)if(t[o].codBarra==e.codBarra)return!1;return!0}var Be={nome:"ItensAdmin",data:function(){return{mode:"save",produto:{},produtos:[],vencidos:[],faltantes:[],tiposProduto:[{text:"medicamento",id:1},{text:"alimento",id:2},{text:"higiene pessoal",id:3},{text:"cosmético",id:4}],fields:[{key:"nome",label:"Nome",sortable:!0},{key:"tipo",label:"Categoria",sortable:!0},{key:"preco",label:"Preço",sortable:!0},{key:"descricao",label:"Descrição",sortable:!0},{key:"actions",label:"Ações"}]}},created:function(){},methods:{loadItens:function(){var e=this;this.produtos=[],l.get("https://farmacia-cg.herokuapp.com/public/produtos").then(function(t){t.data.forEach(function(t){e.produtos.push(t.produto)})})},reset:function(){this.mode="save",this.produto={},this.produtos=[],setTimeout(this.loadItens(),1e3)},save:function(){var e=this;Me(this.produto,this.produtos)?l({method:"post",url:"https://farmacia-cg.herokuapp.com/admin/produtos",data:this.produto}).then(function(){alert("Cadastro realizado com sucesso"),e.reset()}):l({method:"put",url:"https://farmacia-cg.herokuapp.com/admin/produtos/"+this.produto.codBarra,data:this.produto}).then(function(){alert("Alteração realizada!"),e.reset()})},remove:function(){var e=this;l({method:"DELETE",url:"https://farmacia-cg.herokuapp.com/admin/produtos/"+this.produto.codBarra}).then(function(){alert("Remoção realizada!"),e.reset()})},loadProduto:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"save";this.mode=t,this.produto=Object(Le["a"])({},e)},avisaFalta:function(){var e=this;this.produtos.forEach(function(t){t.falta||e.faltantes.push(t.nome),t.vencidos.forEach(function(t){e.vencidos.push(t)})})}},mounted:function(){this.loadItens()}},Ue=Be,Fe=(o("0cd3"),Object(y["a"])(Ue,Ve,Ne,!1,null,null,null));Fe.options.__file="ItensAdmin.vue";var Re=Fe.exports,ze=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"lotes-admin"},[o("b-form",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.lote.numeroLote,expression:"lote.numeroLote"}],attrs:{id:"lote-nome",type:"hidden"},domProps:{value:e.lote.numeroLote},on:{input:function(t){t.target.composing||e.$set(e.lote,"numeroLote",t.target.value)}}}),o("b-row",[o("b-col",{attrs:{md:"6",sm:"12"}},[o("b-form-group",{attrs:{label:"Número:","label-for":"lote-numero"}},[o("b-form-input",{attrs:{id:"lote-numero",type:"text",required:"",readonly:!0,placeholder:"Informe o numero do lote..."},model:{value:e.lote.numeroLote,callback:function(t){e.$set(e.lote,"numeroLote",t)},expression:"lote.numeroLote"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Validade:","label-for":"lote-validade"}},[o("b-form-input",{attrs:{id:"lote-validade",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"2001-09-08"},model:{value:e.lote.dataValidade,callback:function(t){e.$set(e.lote,"dataValidade",t)},expression:"lote.dataValidade"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Quantidade Inicial:","label-for":"lote-qinicial"}},[o("b-form-input",{attrs:{id:"lote-qinicial",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe a quantidade inicial do lote..."},model:{value:e.lote.quantidadeInicial,callback:function(t){e.$set(e.lote,"quantidadeInicial",t)},expression:"lote.quantidadeInicial"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Código do produto:","label-for":"lote-codBarra"}},[o("b-form-input",{attrs:{id:"lote-codBarra",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe o Código do produto..."},model:{value:e.lote.produto.codBarra,callback:function(t){e.$set(e.lote.produto,"codBarra",t)},expression:"lote.produto.codBarra"}})],1)],1)],1),"save"===e.mode?o("b-button",{attrs:{variant:"primary"},on:{click:e.save}},[e._v("Salvar")]):e._e(),"remove"===e.mode?o("b-button",{attrs:{variant:"danger"},on:{click:e.remove}},[e._v("Excluir")]):e._e(),o("b-button",{staticClass:"ml-2",on:{click:e.reset}},[e._v("Cancelar")])],1),o("hr"),o("b-table",{attrs:{hover:"",striped:"",items:e.lotes,fields:e.fields},scopedSlots:e._u([{key:"actions",fn:function(t){return[o("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:function(o){e.loadLote(t.item)}}},[o("i",{staticClass:"fa fa-pencil"})]),o("b-button",{attrs:{variant:"danger"},on:{click:function(o){e.loadLote(t.item,"remove")}}},[o("i",{staticClass:"fa fa-trash"})])]}}])})],1)},He=[],Je={nome:"LotesAdmin",data:function(){return{mode:"save",lote:{produto:{}},lotes:[],fields:[{key:"numeroLote",label:"Número",sortable:!0},{key:"dataValidade",label:"Validade",sortable:!0},{key:"quantidadeInicial",label:"Quantidade Inicial",sortable:!0},{key:"quantidadeVendida",label:"Quantidade Vendida",sortable:!0},{key:"produto.codBarra",label:"Produto referido",sortable:!0},{key:"actions",label:"Ações"}]}},methods:{loadLotes:function(){var e=this;this.lotes=[],l.get("https://farmacia-cg.herokuapp.com/admin/produtos/-1/lotes").then(function(t){t.data.forEach(function(t){e.lotes.push(t)})})},reset:function(){this.mode="save",this.lote={produto:{}},this.loadLotes()},save:function(){var e=this;l.get("https://farmacia-cg.herokuapp.com/public/produtos/"+this.lote.produto.codBarra).then(function(t){e.lote.produto=t.data.produto}).then(function(){l({method:"post",url:"https://farmacia-cg.herokuapp.com/admin/produtos/".concat(e.lote.produto.codBarra,"/lotes"),data:e.lote}).then(function(){alert("Cadastro de lote realizado com sucesso"),e.reset()})})},remove:function(){var e=this;l({method:"DELETE",url:"https://farmacia-cg.herokuapp.com/admin/produtos/".concat(this.lote.produto.codBarra,"/lotes/").concat(this.lote.numeroLote)}).then(function(){alert("Remoção realizada!"),e.reset()})},loadLote:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"save";this.mode=t,this.lote=Object(Le["a"])({},e)}},mounted:function(){this.loadLotes()}},Qe=Je,Ge=(o("e3e6"),Object(y["a"])(Qe,ze,He,!1,null,null,null));Ge.options.__file="LotesAdmin.vue";var Ke=Ge.exports,We=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"vendas-admin"},[o("b-form",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.venda.nome,expression:"venda.nome"}],attrs:{id:"venda-nome",type:"hidden"},domProps:{value:e.venda.nome},on:{input:function(t){t.target.composing||e.$set(e.venda,"nome",t.target.value)}}}),o("b-row",[o("b-col",{attrs:{md:"6",sm:"12"}},[o("b-form-group",{attrs:{label:"Id:","label-for":"venda-id"}},[o("b-form-input",{attrs:{id:"venda-id",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe o Id do venda..."},model:{value:e.venda.nome,callback:function(t){e.$set(e.venda,"nome",t)},expression:"venda.nome"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Produtos:","label-for":"venda-produtos"}},[o("b-form-input",{attrs:{id:"venda-produtos",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe os Produtos da venda..."},model:{value:e.venda.categoria,callback:function(t){e.$set(e.venda,"categoria",t)},expression:"venda.categoria"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Valor Total:","label-for":"venda-valorTotal"}},[o("b-form-input",{attrs:{id:"venda-valorTotal",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Valor total sera calculado..."},model:{value:e.venda.preco,callback:function(t){e.$set(e.venda,"preco",t)},expression:"venda.preco"}})],1)],1)],1),"save"===e.mode?o("b-button",{attrs:{variant:"primary"},on:{click:e.save}},[e._v("Salvar")]):e._e(),"remove"===e.mode?o("b-button",{attrs:{variant:"danger"},on:{click:e.remove}},[e._v("Excluir")]):e._e(),o("b-button",{staticClass:"ml-2",on:{click:e.reset}},[e._v("Cancelar")])],1),o("hr"),o("b-table",{attrs:{hover:"",striped:"",items:e.vendas,fields:e.fields},scopedSlots:e._u([{key:"actions",fn:function(t){return[o("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:function(o){e.loadVenda(t.item)}}},[o("i",{staticClass:"fa fa-pencil"})]),o("b-button",{attrs:{variant:"danger"},on:{click:function(o){e.loadVenda(t.item,"remove")}}},[o("i",{staticClass:"fa fa-trash"})])]}}])})],1)},Xe=[],Ye=(o("c5f6"),{nome:"VendasAdmin",data:function(){return{mode:"save",venda:{},vendas:[],fields:[{key:"id",label:"Id",sortable:!0},{key:"produtos",label:"Produtos",sortable:!0},{key:"valorTotal",label:"valorTotal",sortable:!0},{key:"actions",label:"Ações"}]}},methods:{loadVendas:function(){return this.vendas},reset:function(){this.mode="save",this.venda={},this.loadVendas()},save:function(){var e=this,t=!1;Array.prototype.insert=function(e,t){this.splice(e,0,t)};var o=Number;this.vendas.forEach(function(a){a.id==e.venda.id&&(t=!0,o=e.vendas.indexOf(a),e.vendas.splice(o,1))}),t?this.vendas.insert(o,this.venda):this.vendas.push(this.venda),this.reset()},remove:function(){var e=this;this.vendas.forEach(function(t){t.codigo==e.venda.codigo&&e.vendas.splice(e.vendas.indexOf(t),1)}),this.reset()},loadVenda:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"save";this.mode=t,this.venda=Object(Le["a"])({},e)}},mounted:function(){this.loadVendas()}}),Ze=Ye,et=(o("34cb"),Object(y["a"])(Ze,We,Xe,!1,null,null,null));et.options.__file="VendasAdmin.vue";var tt=et.exports,ot=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"promocoes-admin"},[o("b-form",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.promocao.categoria,expression:"promocao.categoria"}],attrs:{id:"promocao-nome",type:"hidden"},domProps:{value:e.promocao.categoria},on:{input:function(t){t.target.composing||e.$set(e.promocao,"categoria",t.target.value)}}}),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Data início:","label-for":"promocao-di"}},[o("b-form-input",{attrs:{id:"promocao-di",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe a data inicial da promocao..."},model:{value:e.promocao.dataInicio,callback:function(t){e.$set(e.promocao,"dataInicio",t)},expression:"promocao.dataInicio"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Data Final:","label-for":"promocao-df"}},[o("b-form-input",{attrs:{id:"promocao-df",type:"text",required:"",readonly:"remove"===e.mode,placeholder:"Informe a data final da promocao..."},model:{value:e.promocao.dataTermino,callback:function(t){e.$set(e.promocao,"dataTermino",t)},expression:"promocao.dataTermino"}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Tipo de desconto","label-for":"promocao-tipos"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.promocao.tipoDesconto,expression:"promocao.tipoDesconto"}],attrs:{id:"promocao-tipos",type:"Dropdown Button",required:"",readonly:"remove"===e.mode},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.promocao,"tipoDesconto",t.target.multiple?o:o[0])}}},e._l(e.tiposDesconto,function(t){return o("option",{key:t.text},[e._v(e._s(t.text))])}))])],1)],1),o("b-row",[o("b-col",{attrs:{md:"3",sm:"2"}},[o("b-form-group",{attrs:{label:"Categoria:","label-for":"produto-categoria"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.promocao.tipoProduto,expression:"promocao.tipoProduto"}],attrs:{id:"tipos-produto",type:"Dropdown Button",required:"",readonly:"remove"===e.mode},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.promocao,"tipoProduto",t.target.multiple?o:o[0])}}},e._l(e.tiposProduto,function(t){return o("option",{key:t.text},[e._v(e._s(t.text))])}))])],1)],1),"save"===e.mode?o("b-button",{attrs:{variant:"primary"},on:{click:e.save}},[e._v("Salvar")]):e._e(),"remove"===e.mode?o("b-button",{attrs:{variant:"danger"},on:{click:e.remove}},[e._v("Excluir")]):e._e(),o("b-button",{staticClass:"ml-2",on:{click:e.reset}},[e._v("Cancelar")])],1),o("hr"),o("b-table",{attrs:{hover:"",striped:"",items:e.promocoes,fields:e.fields},scopedSlots:e._u([{key:"actions",fn:function(t){return[o("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:function(o){e.loadPromocao(t.item)}}},[o("i",{staticClass:"fa fa-pencil"})]),o("b-button",{attrs:{variant:"danger"},on:{click:function(o){e.loadPromocao(t.item,"remove")}}},[o("i",{staticClass:"fa fa-trash"})])]}}])})],1)},at=[],rt=o("bc3a"),nt={nome:"PromocoesAdmin",data:function(){return{mode:"save",tipo:"Sem desconto",tiposDesconto:[{text:"Bom desconto",id:1},{text:"Ótimo desconto",id:2},{text:"Super desconto",id:3}],tiposProduto:[{text:"medicamento",id:1},{text:"alimento",id:2},{text:"higiene pessoal",id:3},{text:"cosmético",id:4}],promocao:{},promocoes:[],fields:[{key:"tipoDesconto",label:"Categoria",sortable:!0},{key:"dataInicio",label:"Data Inicial",sortable:!0},{key:"dataTermino",label:"Data Final",sortable:!0},{key:"tipoProduto",label:"Tipo de desconto",sortable:!0},{key:"ocorrendo",label:"Ativa",sortable:!0},{key:"actions",label:"Ações"}]}},methods:{loadPromocoes:function(){var e=this;this.promocoes=[],rt.get("https://farmacia-cg.herokuapp.com/admin/promocoes").then(function(t){t.data.forEach(function(t){e.promocoes.push(t)})})},reset:function(){this.mode="save",this.promocao={},this.loadPromocoes()},save:function(){var e=this;rt({method:"post",url:"https://farmacia-cg.herokuapp.com/admin/promocoes",data:this.promocao}).then(function(){alert("Promoção cadastrada com sucesso!"),e.reset()}).catch(function(){alert("Ocorreu algum erro no cadastro!"),e.reset()})},remove:function(){alert("Impossível remover promoções por hora!")},loadPromocao:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"save";this.mode=t,this.promocao=Object(Le["a"])({},e)}},mounted:function(){this.loadPromocoes()}},st=nt,it=(o("08ab"),Object(y["a"])(st,ot,at,!1,null,null,null));it.options.__file="PromocoesAdmin.vue";var lt=it.exports,ct=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"avisos"},[o("div",[e._v(" Produtos Faltantes")]),e._l(e.faltantes,function(t){return o("li",{key:t},[e._v("\n  "+e._s(t)+"\n")])}),o("div",[e._v(" Produtos Com lotes Vencidos ou proximos do vencimento")]),e._l(e.vencidos,function(t){return o("li",{key:t},[e._v("\n  "+e._s(t)+"\n")])})],2)},ut=[],dt={nome:"Avisos",data:function(){return{mode:"save",produto:{},produtos:[],vencidos:[],faltantes:[],fields:[{key:"nome",label:"Nome",sortable:!0},{key:"tipo",label:"Categoria",sortable:!0},{key:"preco",label:"Preço",sortable:!0},{key:"descricao",label:"Descrição",sortable:!0},{key:"actions",label:"Ações"}]}},methods:{loadItens:function(){var e=this;this.produtos=[],l.get("https://farmacia-cg.herokuapp.com/public/produtos").then(function(t){t.data.forEach(function(t){t.produto.quantidadeDisponivel=t.quantidadeDisponivel,e.produtos.push(t.produto)})}).then(function(){e.avisaFalta()})},avisaFalta:function(){var e=this;this.produtos.forEach(function(t){t.quantidadeDisponivel<=15&&e.faltantes.push(t.nome),t.vencimentoProximo&&e.vencidos.push(t.nome)})}},mounted:function(){this.loadItens()}},mt=dt,pt=(o("65de"),Object(y["a"])(mt,ct,ut,!1,null,null,null));pt.options.__file="Avisos.vue";var ft=pt.exports,vt={name:"AdminPages",components:{PageTitle:we,ItensAdmin:Re,LotesAdmin:Ke,VendasAdmin:tt,PromocoesAdmin:lt,Avisos:ft}},ht=vt,bt=(o("9519"),Object(y["a"])(ht,De,je,!1,null,null,null));bt.options.__file="AdminPages.vue";var gt=bt.exports,_t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-content"},[a("div",{staticClass:"auth-modal"},[a("img",{attrs:{src:o("a33c"),width:"200",alt:"Logo"}}),a("div",{staticClass:"auth-title"},[e._v(e._s(e.showSignup?"Cadastro":"Login"))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],attrs:{type:"text",placeholder:"Nome"},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}}),e.showSignup?a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{name:"email",type:"text",placeholder:"E-mail"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}):e._e(),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{name:"password",type:"password",placeholder:"Senha"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),e.showSignup?a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.confirmPassword,expression:"user.confirmPassword"}],attrs:{type:"password",placeholder:"Confirme a Senha"},domProps:{value:e.user.confirmPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"confirmPassword",t.target.value)}}}):e._e(),e.showSignup?a("button",{on:{click:e.signup}},[e._v("Registrar")]):a("button",{on:{click:e.signin}},[e._v("Entrar")]),a("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.showSignup=!e.showSignup}}},[e.showSignup?a("span",[e._v("Já tem cadastro? Acesse o Login!")]):a("span",[e._v("Não tem cadastro? Registre-se aqui!")])])])])},yt=[],kt=(o("7f7f"),{name:"Auth",data:function(){return{showSignup:!1,user:{}}},methods:{signin:function(){var e=this;console.log(this.user),this.user.token="Basic "+btoa(this.user.name+":"+this.user.password),l({url:"".concat(u,"protected/conta"),method:"get",headers:{Authorization:this.user.token}}).then(function(t){l.defaults.headers.common["Authorization"]=e.user.token,t.data.token=e.user.token,console.log(t.data),e.$store.commit("setUser",t.data),localStorage.setItem(c,JSON.stringify(e.user.token)),t.data.admin?e.$router.push({path:"/admin"}):e.$router.push({path:"/"})}).catch(function(){e.user.token=""})},signup:function(){var e=this;if(console.log(this.user),this.user.confirmPassword===this.user.password){var t={username:null,password:null,admin:!1};t.username=this.user.name,t.password=this.user.password,console.log(t),l.post("".concat(u,"public/conta"),t).then(function(){e.$toasted.global.defaultSuccess(),e.user={},e.showSignup=!1}).catch(d)}else this.$toasted.global.defaultError({msg:"Senhas não conferem!"})}}}),xt=kt,wt=(o("ee68"),Object(y["a"])(xt,_t,yt,!1,null,null,null));wt.options.__file="Auth.vue";var Ct=wt.exports;a["a"].use(re["a"]);var Pt=[{name:"home",path:"/",component:Te},{name:"auth",path:"/auth",component:Ct},{name:"adminPages",path:"/admin",component:gt}],$t=new re["a"]({mode:"history",routes:Pt});$t.beforeEach(function(e,t,o){var a=localStorage.getItem(c);if(e.matched.some(function(e){return e.meta.requiresAdmin})){var r=JSON.parse(a);r&&r.admin?o():o({path:"/"})}else o()});var At=$t;a["a"].config.productionTip=!1,new a["a"]({store:ee,router:At,render:function(e){return e(Z)}}).$mount("#app")},"58fe":function(e,t,o){},"5b5c":function(e,t,o){"use strict";var a=o("3e69"),r=o.n(a);r.a},"5dee":function(e){e.exports=[{nome:"pasta",situacao:"tem",preco:"5,30",tipo:"higiene"},{nome:"dorflex",situacao:"tem",preco:"66,30",tipo:"medicamento"},{nome:"cheetos",situacao:"tem",preco:"0,30",tipo:"comida"}]},"65de":function(e,t,o){"use strict";var a=o("c0cc"),r=o.n(a);r.a},"6eda":function(e,t,o){},"82f9":function(e,t,o){},9519:function(e,t,o){"use strict";var a=o("366f"),r=o.n(a);r.a},9551:function(e,t,o){"use strict";var a=o("6eda"),r=o.n(a);r.a},9961:function(e,t,o){},"9f20":function(e,t,o){},"9f34":function(e,t,o){"use strict";var a=o("08f2"),r=o.n(a);r.a},a09f:function(e,t,o){"use strict";var a=o("52d3"),r=o.n(a);r.a},a33c:function(e,t,o){e.exports=o.p+"img/joy.4b51beb8.png"},a405:function(e,t,o){"use strict";var a=o("dda0"),r=o.n(a);r.a},b497:function(e,t,o){"use strict";var a=o("3599"),r=o.n(a);r.a},bd70:function(e,t,o){},c0cc:function(e,t,o){},c21b:function(e,t,o){},cd56:function(e,t,o){},cf1c:function(e,t,o){e.exports=o.p+"img/loading.8a7630ca.gif"},dda0:function(e,t,o){},e3e6:function(e,t,o){"use strict";var a=o("0652"),r=o.n(a);r.a},ee68:function(e,t,o){"use strict";var a=o("9f20"),r=o.n(a);r.a},f587:function(e,t,o){}});
//# sourceMappingURL=app.f8559a4e.js.map